syntax = "proto3";

package rating.user.v1;

import "buf/validate/validate.proto";

option go_package = "github.com/dduzgun-security/jug/jug-model/jug-model-go/rating/user/v1;userv1";
option java_package = "com.rating.user.v1";
option java_multiple_files = true;

message User {
    string first_name = 1 [
        (buf.validate.field).required = true,
        (buf.validate.field).string.max_len = 64
    ];
    string last_name = 2 [
        (buf.validate.field).required = true,
        (buf.validate.field).string.max_len = 64
    ];
    string email = 3 [
        (buf.validate.field).required = true,
        (buf.validate.field).string.email = true
    ];
    uint32 age = 4 [
        (buf.validate.field).required = true,
        (buf.validate.field).uint32.lte = 150
    ];
    string phone_number = 5 [
        (buf.validate.field).required = true,
        (buf.validate.field).string.pattern = "^(\\+\\d{1,3}[\\s-]?)?\\d{10}$"
    ];
    string status = 6 [
        (buf.validate.field).required = true,
        (buf.validate.field).string.pattern = "^(Active|Inactive|Premium)$"
    ];

    option (buf.validate.message).cel = {
    id: "first_name_requires_last_name"
    message: "last_name must be present if first_name is present"
    expression: "!has(this.first_name) || has(this.last_name)"
  };
}

message UserRequest {
    User user = 1;
}

message UserResponse {
    string message = 1;
}